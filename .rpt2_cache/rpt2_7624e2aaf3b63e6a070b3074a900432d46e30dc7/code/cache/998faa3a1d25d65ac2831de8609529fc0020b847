{
  "code": "export default class TableManager {\r\n    constructor() {\r\n        this.map = {};\r\n        this.mapList = {};\r\n    }\r\n    register(fileName, cla) {\r\n        this.map[fileName] = cla;\r\n    }\r\n    getOneByName(fileName) {\r\n        return this.map[fileName];\r\n    }\r\n    getTable(tabelId) {\r\n        return this.mapList[tabelId];\r\n    }\r\n    getDataByNameAndId(tabelId, id) {\r\n        var arr = this.getTable(tabelId);\r\n        var len = arr.length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (arr[i].id == id) {\r\n                return arr[i];\r\n            }\r\n        }\r\n    }\r\n    onParse(arr) {\r\n        for (var i = 0; i < arr.length; i += 2) {\r\n            var keyname = arr[i];\r\n            var Cla = this.getOneByName(keyname);\r\n            console.log(keyname);\r\n            if (Cla == null) {\r\n                console.error(\"没有注册表-------\" + keyname);\r\n                continue;\r\n            }\r\n            var contente = arr[i + 1];\r\n            var resultArr = [];\r\n            var strary = contente.split(\"\\n\");\r\n            var tmp = strary[strary.length - 1];\r\n            if (tmp === \"\") {\r\n                strary.pop();\r\n            }\r\n            var head = String(strary[0]).replace(\"\\r\", \"\");\r\n            var headary = head.split(\"\\t\");\r\n            var contentary = strary.slice(1);\r\n            var dataList = [];\r\n            for (var k = 0; k < contentary.length; k++) {\r\n                var propstr = String(contentary[k]).replace(\"\\r\", \"\");\r\n                var propary = propstr.split(\"\\t\");\r\n                var clazz = new Cla();\r\n                for (var j = 0, len2 = propary.length; j < len2; j++) {\r\n                    var now = clazz[headary[j]];\r\n                    var value = propary[j];\r\n                    if (typeof now === 'number') {\r\n                        now = parseInt(value + \"\");\r\n                        if ((now + \"\") != value) {\r\n                            now = parseFloat(value + \"\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        now = value;\r\n                    }\r\n                    clazz[headary[j]] = now;\r\n                }\r\n                dataList.push(clazz);\r\n            }\r\n            this.mapList[keyname] = dataList;\r\n        }\r\n    }\r\n}\r\n",
  "references": []
}
