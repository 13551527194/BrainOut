{
  "code": "export default class ImageEffect {\r\n    constructor() {\r\n        this.arr = [];\r\n    }\r\n    start() {\r\n        Laya.timer.loop(300, this, this.onUpdate);\r\n    }\r\n    onUpdate() {\r\n        let vo;\r\n        let img;\r\n        let arr1;\r\n        let s1;\r\n        let s2;\r\n        for (let i = 0; i < this.arr.length; i++) {\r\n            vo = this.arr[i];\r\n            img = vo.spr;\r\n            arr1 = img.skin.split(\".\");\r\n            if (arr1.length == 2) {\r\n                s1 = arr1[0];\r\n                s2 = arr1[1];\r\n                s1 = s1.substr(0, s1.length - 1);\r\n                img.skin = s1 + vo.curTimes + \".\" + s2;\r\n                vo.curTimes++;\r\n                if (vo.curTimes > vo.times) {\r\n                    vo.curTimes = 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addEffect(spr, times = 3) {\r\n        let vo = new EffectVO();\r\n        vo.spr = spr;\r\n        vo.times = times;\r\n        vo.curTimes = 1;\r\n        spr.on(Laya.Event.DISPLAY, this, this.onDis, [vo]);\r\n        spr.on(Laya.Event.UNDISPLAY, this, this.onUndis, [vo]);\r\n    }\r\n    onDis(vo) {\r\n        this.arr.push(vo);\r\n    }\r\n    onUndis(vo) {\r\n        for (let i = 0; i < this.arr.length; i++) {\r\n            let tvo = this.arr[i];\r\n            if (tvo && tvo == vo) {\r\n                this.arr[i] = null;\r\n                this.arr.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport class EffectVO {\r\n}\r\n",
  "references": []
}
